<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mystic Oracle - Fatih Elite</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8501135338572495" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #ffd700; --gold-dim: #b8860b; --purple: #9c27b0; --deep-bg: #0a0112; --glass: rgba(10, 5, 20, 0.85); --border: rgba(255, 215, 0, 0.3); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { background-color: var(--deep-bg); background-image: radial-gradient(circle at 50% 100%, #2a0a40, #000); color: #e0c3fc; font-family: 'Poppins', sans-serif; margin: 0; min-height: 100vh; display: flex; flex-direction: column; align-items: center; overflow-x: hidden; position: relative; }
        #mystic-alert { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.8); background: var(--glass); border: 2px solid var(--gold); padding: 25px; border-radius: 20px; z-index: 99999; text-align: center; display: none; opacity: 0; box-shadow: 0 0 50px rgba(0,0,0,1), 0 0 20px var(--purple); transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); width: 85%; max-width: 320px; }
        #mystic-alert.show { opacity: 1; transform: translate(-50%, -50%) scale(1); display: block; }
        .alert-btn { margin-top: 20px; background: var(--gold); color: #000; border: none; padding: 10px 25px; border-radius: 15px; font-weight: bold; cursor: pointer; font-family: 'Cinzel'; }
        .online-status { position: fixed; top: 20px; left: 20px; display: flex; align-items: center; gap: 8px; background: rgba(0,0,0,0.5); padding: 5px 12px; border-radius: 20px; border: 1px solid rgba(0, 255, 204, 0.3); font-size: 11px; color: #00ffcc; z-index: 1000; }
        .online-dot { width: 8px; height: 8px; background: #00ffcc; border-radius: 50%; animation: blinkOnline 1.5s infinite; }
        #star-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -3; }
        .star { position: absolute; background: white; border-radius: 50%; opacity: 0; animation: twinkle ease-in-out infinite; }
        #fog { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url('https://raw.githubusercontent.com/s1mpson-/assets/master/fog.png') repeat; opacity: 0.05; z-index: -2; animation: fogMove 60s linear infinite; pointer-events: none; }
        @keyframes fogMove { 0% { background-position: 0 0; } 100% { background-position: 1000px 0; } }
        #welcome-overlay { position: fixed; inset: 0; background: var(--deep-bg); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 20000; transition: opacity 1s ease-out; }
        .wizard-gif { font-size: 80px; filter: drop-shadow(0 0 20px var(--gold)); animation: wizardFloat 3s infinite ease-in-out; }
        .container { width: 95%; max-width: 1100px; display: grid; grid-template-columns: 1fr; gap: 25px; margin-top: 30px; margin-bottom: 50px; z-index: 10; }
        @media (min-width: 992px) { .container { grid-template-columns: 320px 1fr; } }
        .panel { background: var(--glass); border: 1px solid var(--border); border-radius: 24px; padding: 30px; position: relative; }
        input, select, textarea { width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: #fff; margin-top: 5px; }
        .tab-btn { padding: 16px; text-align: left; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #ddd; cursor: pointer; border-radius: 12px; margin-bottom: 10px; width: 100%; transition: 0.3s; }
        .tab-btn.active { background: linear-gradient(90deg, #7b1fa2, transparent); border-left: 4px solid var(--gold); color: #fff; }
        .grid-area { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 15px; }
        .card-item { background: rgba(255,215,0,0.05); border: 1px solid var(--gold); color: var(--gold); padding: 15px 5px; border-radius: 10px; text-align: center; cursor: pointer; font-size: 10px; }
        .card-item.selected { background: var(--gold); color: #000; box-shadow: 0 0 15px var(--gold); }
        .tarot-card { perspective: 1000px; height: 120px; cursor: pointer; }
        .tarot-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .tarot-card.flipped .tarot-inner { transform: rotateY(180deg); }
        .tarot-front, .tarot-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 10px; border: 1px solid var(--gold); display: flex; align-items: center; justify-content: center; flex-direction: column; }
        .tarot-back { background: linear-gradient(135deg, #1a0033, #4a0072); color: var(--gold); font-size: 20px; }
        .tarot-front { background: rgba(123, 31, 162, 0.8); transform: rotateY(180deg); color: #fff; font-size: 9px; padding: 5px; text-align: center; }
        .main-btn { background: linear-gradient(135deg, #4a0072, #7b1fa2); color: #fff; border: 1px solid var(--gold); padding: 18px; border-radius: 16px; font-weight: bold; cursor: pointer; margin-top: 20px; width: 100%; letter-spacing: 1px; font-family: 'Cinzel'; }
        #sonucAlani { display: none; margin-top: 25px; padding: 25px; background: rgba(0,0,0,0.8); border-left: 4px solid var(--gold); border-radius: 16px; line-height: 1.7; color: #f0e6ff; text-align: justify; }
        
        .image-box { margin-top: 15px; border: 2px dashed rgba(255, 215, 0, 0.3); border-radius: 16px; min-height: 180px; display: flex; flex-wrap: wrap; align-items: center; justify-content: center; gap: 10px; padding: 15px; background: rgba(0,0,0,0.2); }
        .gallery-item { position: relative; width: 80px; height: 80px; }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; border-radius: 10px; border: 1px solid var(--gold); }
        .remove-btn { position: absolute; top: -5px; right: -5px; background: #ff4444; color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 12px; cursor: pointer; font-weight: bold; border: 1px solid white; z-index: 10; }
        .add-more-btn { width: 80px; height: 80px; border: 2px dashed var(--gold); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 30px; color: var(--gold); cursor: pointer; background: rgba(255,215,0,0.05); }

        .planet-row { display: flex; justify-content: space-between; font-size: 11px; margin-top: 8px; padding: 5px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .history-bar-container { width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin: 5px 0 15px 0; }
        .history-bar-fill { height: 100%; background: var(--gold); border-radius: 2px; width: 0; transition: width 1s; }
        #surpriz-kutu { background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), transparent); border: 1px solid var(--gold); border-radius: 15px; padding: 15px; margin-top: 20px; text-align: center; cursor: pointer; transition: 0.3s; }
        .side-icon { position: fixed; top: 50%; transform: translateY(-50%); width: 280px; opacity: 0.1; z-index: -1; pointer-events: none; filter: drop-shadow(0 0 10px var(--gold)); }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
    </style>
</head>
<body>
    <div id="mystic-alert"><div id="alert-icon" style="font-size: 40px; margin-bottom: 10px;">üîÆ</div><div id="alert-text"></div><button class="alert-btn" onclick="closeAlert()">ANLADIM</button></div>
    <div class="online-status"><div class="online-dot"></div><span>142 √áevrimi√ßi K√¢hin</span></div>
    <div id="welcome-overlay"><div class="wizard-gif">üßô‚ú®</div><div style="text-align:center; color:gold; font-family:'Cinzel'; margin-top:20px;">Mystic Oracle'a Ho≈ü Geldin<br><span style="font-size: 14px; opacity: 0.8;">Kaderin Yƒ±ldƒ±zlarda Saklƒ±...</span></div></div>
    <div id="star-container"></div><div id="fog"></div>
    <audio id="bgMusic" loop><source src="https://actions.google.com/sounds/v1/horror/ambient_hum_creepy.ogg" type="audio/ogg"></audio>
    <div id="mainAppContent" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
        <div class="header" style="text-align:center; margin-top:40px; position:relative;">
            <div class="top-controls" style="position: absolute; right: -50px; top: -10px;"><button onclick="toggleMusic()" style="background:none; border:none; cursor:pointer; font-size:24px;">üéµ</button></div>
            <h1 id="siteMainTitle" style="font-family:'Cinzel'; font-size: clamp(24px, 8vw, 40px); color: gold; margin:0;">MYSTIC ORACLE</h1>
            <div id="liveClock" style="font-size: 11px; color:gold; margin-top: 5px; opacity:0.7;"></div>
        </div>
        <div class="container">
            <div class="panel">
                <h3 style="color:gold; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:10px; margin-top:0;">üë§ ANALƒ∞Z PROFƒ∞Lƒ∞</h3>
                <label style="font-size:10px; color:gold; display:block; margin-top:15px; letter-spacing:1px;">ƒ∞SMƒ∞Nƒ∞Z *</label><input type="text" id="userName" placeholder="ƒ∞sim Giriniz">
                <label style="font-size:10px; color:gold; display:block; margin-top:15px; letter-spacing:1px;">DOƒûUM TARƒ∞Hƒ∞ *</label><input type="date" id="dob" onchange="calcAstro()">
                <label style="font-size:10px; color:gold; display:block; margin-top:15px; letter-spacing:1px;">DURUMUNUZ *</label>
                <select id="status"><option value="">Se√ßiniz...</option><option value="Bekar">Bekar</option><option value="Evli">Evli</option><option value="ƒ∞li≈ükisi Var">ƒ∞li≈ükisi Var</option></select>
                <div id="surpriz-kutu" onclick="surprizAc()"><span id="kutu-ikon">üéÅ</span><div id="kutu-metin" style="font-size: 11px; color: #fff; font-style: italic;">G√ºn√ºn Kader Sandƒ±ƒüƒ±nƒ± A√ß...</div></div>
                <div id="planet-monitor" style="margin-top:20px;"></div>
                <div style="margin-top:20px;"><div style="font-size: 9px; color: var(--gold);">RUHSAL G√ú√á</div><div class="history-bar-container"><div id="bar-spirit" class="history-bar-fill"></div></div><div style="font-size: 9px; color: var(--gold);">A≈ûK ENERJƒ∞Sƒ∞</div><div class="history-bar-container"><div id="bar-love" class="history-bar-fill" style="background: #e91e63;"></div></div></div>
                <div id="astroInfo" style="text-align:center; margin-top:15px; color:gold; font-weight:bold;"></div>
                <div style="margin-top:25px;" id="menuContainer"></div>
            </div>
            <div class="panel">
                <h2 id="t-active-title" style="margin-top:0; color:gold; font-family:'Cinzel'; text-align:center; font-size:18px;"></h2>
                <div id="section-photo">
                    <div class="image-box" id="imgPreview">
                        <div class="add-more-btn" onclick="document.getElementById('imgInput').click()">+</div>
                    </div>
                    <input type="file" id="imgInput" accept="image/*" style="display:none;" onchange="handleMultipleImages(this)">
                </div>
                <div id="section-grid" style="display:none;" class="grid-area"></div>
                <div id="section-dream" style="display:none;"><textarea id="dreamData" rows="6" placeholder="R√ºyanƒ± detaylƒ±ca fƒ±sƒ±lda..."></textarea></div>
                <button class="main-btn" onclick="runOracle()">KEHANETƒ∞ BA≈ûLAT</button>
                <div id="loader" style="display:none; text-align:center; margin-top:20px; color:var(--gold); font-size:14px; font-weight:bold; animation: pulse 1s infinite;">‚ú® Kaderin Okunuyor...</div>
                <div id="sonucAlani"><div id="sonucText"></div></div>
            </div>
        </div>
    </div>
<script>
    let activeIdx = 0; let selectedImages = []; let tarotStack = []; let zodiacSelected = "";
    const menuItems = ["Kahve Falƒ±", "El Falƒ±", "Tarot", "Bur√ßlar", "R√ºyalar", "Numeroloji"];
    const signs = ["Ko√ß","Boƒüa","ƒ∞kizler","Yenge√ß","Aslan","Ba≈üak","Terazi","Akrep","Yay","Oƒülak","Kova","Balƒ±k"];
    const tarotNames = ["√ñl√ºm","A≈üƒ±klar","Kule","Yƒ±ldƒ±z","Ay","G√ºne≈ü","D√ºnya","Adalet","B√ºy√ºc√º","Ermi≈ü","≈ûeytan","Aptal"];
    const surprizler = [{i:"üóùÔ∏è", n:"G√ºm√º≈ü Anahtar", m:"Fƒ±rsat kapƒ±da."}, {i:"ü™∂", n:"Anka T√ºy√º", m:"Ruhun yenileniyor."}];

    function renderMenu() {
        const container = document.getElementById('menuContainer'); container.innerHTML = '';
        menuItems.forEach((name, i) => {
            const b = document.createElement('button'); b.className = `tab-btn ${i===activeIdx?'active':''}`;
            b.innerText = name; b.onclick = () => { 
                activeIdx = i; tarotStack = []; zodiacSelected = ""; selectedImages = [];
                document.getElementById('sonucAlani').style.display = 'none'; renderMenu();
                document.getElementById('t-active-title').innerText = name;
                document.getElementById('section-photo').style.display = (i<2)?"block":"none";
                document.getElementById('section-grid').style.display = (i===2||i===3)?"grid":"none";
                document.getElementById('section-dream').style.display = (i===4)?"block":"none";
                if(i<2) updateGalleryUI();
                if(i===2) loadGrid('tarot'); if(i===3) loadGrid('signs');
            };
            container.appendChild(b);
            if(i===activeIdx) document.getElementById('t-active-title').innerText = name;
        });
    }

    function loadGrid(mode) {
        const grid = document.getElementById('section-grid'); grid.innerHTML = '';
        if(mode === 'signs') {
            signs.forEach(s => {
                const el = document.createElement('div'); el.className = 'card-item'; el.innerText = s;
                el.onclick = () => { document.querySelectorAll('.card-item').forEach(x=>x.classList.remove('selected')); el.classList.add('selected'); zodiacSelected = s; };
                grid.appendChild(el);
            });
        } else {
            tarotNames.forEach((n, i) => {
                const el = document.createElement('div'); el.className = 'tarot-card';
                el.innerHTML = `<div class="tarot-inner"><div class="tarot-back">?</div><div class="tarot-front">${n}</div></div>`;
                el.onclick = () => { if(tarotStack.length<3 && !el.classList.contains('flipped')) { el.classList.add('flipped'); tarotStack.push(n); } };
                grid.appendChild(el);
            });
        }
    }

    function handleMultipleImages(input) {
        if(input.files[0]){
            const r = new FileReader();
            r.onload=(e)=>{ selectedImages.push(e.target.result); updateGalleryUI(); };
            r.readAsDataURL(input.files[0]);
            input.value = "";
        }
    }

    function removeImage(idx) { selectedImages.splice(idx, 1); updateGalleryUI(); }

    function updateGalleryUI() {
        const preview = document.getElementById('imgPreview'); preview.innerHTML = '';
        selectedImages.forEach((src, index) => {
            const div = document.createElement('div'); div.className = 'gallery-item';
            div.innerHTML = `<img src="${src}"><div class="remove-btn" onclick="removeImage(${index})">X</div>`;
            preview.appendChild(div);
        });
        if(selectedImages.length < 5) {
            const addBtn = document.createElement('div'); addBtn.className = 'add-more-btn';
            addBtn.innerText = '+'; addBtn.onclick = () => document.getElementById('imgInput').click();
            preview.appendChild(addBtn);
        }
    }

    async function runOracle() {
        const n = document.getElementById('userName').value;
        const s = document.getElementById('status').value;
        const d = document.getElementById('dob').value;
        const loader = document.getElementById('loader');
        if(!n || !s || !d) { showMysticAlert("L√ºtfen t√ºm alanlarƒ± doldurunuz."); return; }
        const age = new Date().getFullYear() - new Date(d).getFullYear();
        if(age < 8 || age > 100) { showMysticAlert("L√ºtfen ya≈üƒ±nƒ±zƒ± doƒüru giriniz."); return; }
        if(activeIdx < 2 && selectedImages.length === 0) { showMysticAlert("L√ºtfen analiz i√ßin fotoƒüraf ekleyin."); return; }
        if(activeIdx === 3 && !zodiacSelected) { showMysticAlert("L√ºtfen bir bur√ß se√ßiniz."); return; }

        loader.style.display = 'block'; document.getElementById('sonucAlani').style.display = 'none';

        // --- G√ñREV DAƒûILIMI (Prompt Separation) ---
        let promptText = "";
        
        if (activeIdx === 0 || activeIdx === 1) { 
            // --- KAHVE ve EL FALI MODU (G√∂rsel Analiz) ---
            promptText = `Karakter: Sen mahallenin en keskin g√∂zl√º, resimdeki en ufak detayƒ± bile g√∂ren, dobra ve profesyonel falcƒ± teyzesisin.
            Kullanƒ±cƒ±: ${n} (${age}, ${s}).
            
            KURALLAR:
            1. ASLA "Hissediyorum" gibi bo≈ü laflarla ba≈ülama.
            2. ASLA MADDE ƒ∞≈ûARETƒ∞ (BULLET POINTS) veya Lƒ∞STE FORMATI KULLANMA.
            3. T√ºm yorumu tek bir akƒ±cƒ± metin/hikaye gibi yaz. Sohbet eder gibi doƒüal olsun.
            4. GER√áEK√áƒ∞ OL (SALLAMASYON YASAK): Eƒüer fincanda yƒ±lan, daƒü, nazar, ku≈ü YOKSA, sƒ±rf adet yerini bulsun diye var deme. Sadece g√∂rd√ºƒü√ºn ≈üekilleri (leke, √ßizgi, hayvan, nesne) yorumla.
            5. KAPSAYICI OL: Kullanƒ±cƒ± "Evli" diye sadece evliliƒüinden bahsetme. Evli insanƒ±n da i≈üi, parasƒ±, arkada≈üƒ±, stresi olur. B√ºt√ºnc√ºl yakla≈ü.
            6. DENGE KUR: Hep olumlu ya da hep olumsuz konu≈üma. Hayatƒ±n i√ßinden, ger√ßek√ßi uyarƒ±lar ve m√ºjdeler ver.
            7. G√ñRSEL ANALƒ∞Z: ≈ûekilleri kullanƒ±cƒ±ya tarif et ("Bak fincanƒ±n kulpuna yakƒ±n yerde kararmƒ±≈ü bir bulut var..." gibi) ve hemen ardƒ±ndan anlamƒ±nƒ± s√∂yle.`;
            
            if(activeIdx === 0) promptText += ` √ñNEMLƒ∞ KONTROL: Resme bak. Eƒüer resimde net bir T√ºrk kahvesi fincanƒ± veya tabaƒüƒ± yoksa (√∂rneƒüin manzara, araba, kƒ±yafet, y√ºz vb. varsa), fal yorumu yapma ve SADECE "ERROR_CUP" cevabƒ±nƒ± ver.`;
            if(activeIdx === 1) promptText += ` √ñNEMLƒ∞ KONTROL: Resme bak. Eƒüer resimde insan eli (avu√ß i√ßi) yoksa, fal yorumu yapma ve SADECE "ERROR_HAND" cevabƒ±nƒ± ver.`;
            
        } else if (activeIdx === 3) {
            // --- BUR√áLAR MODU (Saf Astroloji) ---
            const today = new Date().toLocaleDateString('tr-TR');
            promptText = `
            Kƒ∞MLƒ∞K: Sen uzman bir Astrologsun ama dilin samimi ve anla≈üƒ±lƒ±r (Falcƒ± Teyze tonunda).
            G√ñREV: ${zodiacSelected} burcu i√ßin G√úNL√úK BUR√á YORUMU yap.
            TARƒ∞H: ${today}.
            KULLANICI: ${n} (${s}, ${age} ya≈üƒ±nda).

            √áOK √ñNEMLƒ∞ YASAKLAR:
            1. ASLA "Fincan", "Telve", "Leke", "≈ûekil", "G√∂r√ºyorum" kelimelerini kullanma. Bu bir g√∂rsel analiz DEƒûƒ∞LDƒ∞R.
            2. Resme bakma, sadece BUR√á √∂zelliklerine ve bug√ºn√ºn g√∂ky√ºz√º enerjilerine odaklan.
            
            ƒ∞√áERƒ∞K KURALLARI:
            1. ${zodiacSelected} burcunun bug√ºn (veya bu hafta) hangi gezegen etkisinde olduƒüunu s√∂yleyerek ba≈üla.
            2. A≈ük, Para, Kariyer ve Saƒülƒ±k konularƒ±nƒ± tek bir akƒ±cƒ± metin i√ßinde harmanla (ba≈ülƒ±k kullanmadan).
            3. Kullanƒ±cƒ± bekarsa a≈üka, evliyse haneye, √ßalƒ±≈üƒ±yorsa kariyere √∂zel vurgular yap ama diƒüer konularƒ± atlama.
            4. "Bug√ºn senin i√ßin yƒ±ldƒ±zlar diyor ki..." gibi bir giri≈ü yap.
            `;
            
        } else {
            // --- TAROT, R√úYA, NUMEROLOJƒ∞ ---
            promptText = `Karakter: Bilge ve samimi yorumcu. Kullanƒ±cƒ±: ${n} (${age}, ${s}).`;
            if(activeIdx === 2) promptText += ` Kartlar: ${tarotStack.join(', ')}. Kartlarƒ±n gizli anlamlarƒ±nƒ± tek bir hikaye b√ºt√ºnl√ºƒü√ºnde (liste yapmadan) yorumla.`;
            if(activeIdx === 4) promptText += ` R√ºya: ${document.getElementById('dreamData').value}. Bu r√ºyanƒ±n bilin√ßaltƒ± mesajlarƒ±nƒ± samimi bir dille √ß√∂z.`;
            if(activeIdx === 5) promptText += ` Numeroloji: Doƒüum tarihi ${d}. Sayƒ±larƒ±n kaderine etkisini detaylƒ± ve akƒ±cƒ± anlat.`;
        }

        try {
            // Bur√ßlar hari√ß diƒüerlerinde resim g√∂nder, bur√ßta sadece metin gitse daha iyi ama yapƒ± bozulmasƒ±n diye bo≈ü resim dizisi veya mevcut resimleri yollayabiliriz. 
            // Ancak API g√∂rsel varsa g√∂rsele odaklanabilir. Bu y√ºzden Bur√ß modunda resim g√∂ndermemek en garantisi.
            
            let messagesPayload = [ { type: "text", text: promptText } ];
            
            // Sadece Kahve(0) ve El Falƒ±(1) i√ßin resimleri ekle.
            if (activeIdx === 0 || activeIdx === 1) {
                const imgPayloads = selectedImages.map(base64 => ({ type: "image_url", image_url: { url: base64 } }));
                messagesPayload = [...messagesPayload, ...imgPayloads];
            }

            const res = await fetch("https://text.pollinations.ai/", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    messages: [ { role: "user", content: messagesPayload } ],
                    model: "openai", seed: Math.floor(Math.random()*9999)
                })
            });
            const text = await res.text();
            
            loader.style.display = 'none';

            if (text.includes("ERROR_CUP")) { showMysticAlert("L√ºtfen kahve fincanƒ± g√∂nderiniz."); return; }
            if (text.includes("ERROR_HAND")) { showMysticAlert("L√ºtfen el resmi g√∂nderiniz."); return; }
            
            // Temizleme
            let cleanText = text;
            cleanText = cleanText.split("---")[0];
            cleanText = cleanText.replace(/(\*\*Support Pollinations\.AI\*\*|Powered by Pollinations\.AI|üå∏ \*\*Ad\*\* üå∏).*/gis, "");
            
            document.getElementById('sonucText').innerText = cleanText.trim();
            document.getElementById('sonucAlani').style.display = 'block';
            updateEnergyBars();
        } catch (e) { loader.style.display = 'none'; showMysticAlert("Baƒülantƒ± koptu."); }
    }

    function surprizAc() {
        const name = document.getElementById('userName').value; if(!name) { showMysticAlert("ƒ∞smini yazmalƒ±sƒ±n."); return; }
        const secilen = surprizler[Math.floor(Math.random() * surprizler.length)];
        document.getElementById('kutu-ikon').innerHTML = secilen.i;
        document.getElementById('kutu-metin').innerHTML = `<b>${secilen.n}</b>: ${secilen.m}`;
    }

    function showMysticAlert(t) { document.getElementById('alert-text').innerText = t; const b = document.getElementById('mystic-alert'); b.style.display="block"; setTimeout(()=>b.classList.add('show'),10); }
    function closeAlert() { document.getElementById('mystic-alert').classList.remove('show'); setTimeout(()=>document.getElementById('mystic-alert').style.display="none",300); }
    function syncPlanets() { const p=[{n:"Merk√ºr",v:72},{n:"Ven√ºs",v:45},{n:"Mars",v:88},{n:"J√ºpiter",v:94}]; document.getElementById('planet-monitor').innerHTML=p.map(x=>`<div class="planet-row"><span>${x.n}</span><span style="color:gold">%${x.v}</span></div>`).join(''); }
    function updateEnergyBars() { document.getElementById('bar-spirit').style.width=(Math.floor(Math.random()*40)+60)+"%"; document.getElementById('bar-love').style.width=(Math.floor(Math.random()*40)+50)+"%"; }
    function toggleMusic() { const m=document.getElementById('bgMusic'); m.paused?m.play():m.pause(); }
    function calcAstro() { 
        const d=document.getElementById('dob').value; if(!d)return; 
        const date = new Date(d);
        const day = date.getDate(); const month = date.getMonth() + 1;
        let sign = "";
        if ((month == 3 && day >= 21) || (month == 4 && day <= 19)) sign = "Ko√ß";
        else if ((month == 4 && day >= 20) || (month == 5 && day <= 20)) sign = "Boƒüa";
        else if ((month == 5 && day >= 21) || (month == 6 && day <= 20)) sign = "ƒ∞kizler";
        else if ((month == 6 && day >= 21) || (month == 7 && day <= 22)) sign = "Yenge√ß";
        else if ((month == 7 && day >= 23) || (month == 8 && day <= 22)) sign = "Aslan";
        else if ((month == 8 && day >= 23) || (month == 9 && day <= 22)) sign = "Ba≈üak";
        else if ((month == 9 && day >= 23) || (month == 10 && day <= 22)) sign = "Terazi";
        else if ((month == 10 && day >= 23) || (month == 11 && day <= 21)) sign = "Akrep";
        else if ((month == 11 && day >= 22) || (month == 12 && day <= 21)) sign = "Yay";
        else if ((month == 12 && day >= 22) || (month == 1 && day <= 19)) sign = "Oƒülak";
        else if ((month == 1 && day >= 20) || (month == 2 && day <= 18)) sign = "Kova";
        else sign = "Balƒ±k";
        document.getElementById('astroInfo').innerText="G√ºne≈ü Burcun: "+sign; 
    }

    window.onload = () => {
        syncPlanets(); updateEnergyBars(); renderMenu(); updateGalleryUI();
        const sc=document.getElementById('star-container');
        for(let i=0; i<60; i++){const s=document.createElement('div'); s.className='star'; s.style.left=Math.random()*100+'%'; s.style.top=Math.random()*100+'%'; s.style.width='2px'; s.style.height='2px'; s.style.animationDuration=(Math.random()*3+2)+'s'; sc.appendChild(s);}
        setTimeout(()=>{const o=document.getElementById('welcome-overlay'); if(o){o.style.opacity='0'; setTimeout(()=>o.remove(),800);}},1500);
        setInterval(()=>{document.getElementById('liveClock').innerText=new Date().toLocaleString('tr-TR');},1000);
    };
</script>
</body>
</html>